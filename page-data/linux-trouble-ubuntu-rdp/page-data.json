{"componentChunkName":"component---src-templates-post-template-js","path":"/linux-trouble-ubuntu-rdp","result":{"data":{"markdownRemark":{"id":"1149dae9-f55d-5cb1-ba96-e0968016a206","html":"<p>この記事では、Ubuntuマシンに対してXRDP接続を行ったときに発生した問題についてまとめていきます。</p>\n<!-- omit in toc -->\n<h2 id=\"もくじ\" style=\"position:relative;\"><a href=\"#%E3%82%82%E3%81%8F%E3%81%98\" aria-label=\"もくじ permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>もくじ</h2>\n<ul>\n<li><a href=\"#ubuntu%E3%81%ABxrdp%E3%81%A7%E6%8E%A5%E7%B6%9A%E3%81%99%E3%82%8B%E3%81%A8%E3%81%8D%E3%81%AB%E3%82%B5%E3%82%A4%E3%83%89%E3%83%90%E3%83%BC%E3%82%92%E8%A1%A8%E7%A4%BA%E3%81%99%E3%82%8B%E8%A8%AD%E5%AE%9A\">UbuntuにXRDPで接続するときにサイドバーを表示する設定</a></li>\n<li><a href=\"#ubuntu%E3%81%ABxrdp%E6%8E%A5%E7%B6%9A%E3%81%97%E3%81%9F%E3%81%A8%E3%81%8D%E3%81%AB%E6%97%A5%E6%9C%AC%E8%AA%9E%E3%82%AD%E3%83%BC%E3%83%9C%E3%83%BC%E3%83%89%E8%A8%AD%E5%AE%9A%E3%81%8C%E5%88%A9%E3%81%8B%E3%81%AA%E3%81%8F%E3%81%AA%E3%82%8B%E5%95%8F%E9%A1%8C%E3%81%AE%E5%AF%BE%E5%87%A6\">UbuntuにXRDP接続したときに日本語キーボード設定が利かなくなる問題の対処</a></li>\n<li><a href=\"#%E3%83%96%E3%83%A9%E3%82%A6%E3%82%B6%E9%96%B2%E8%A6%A7%E6%99%82%E3%81%AE%E3%82%B9%E3%82%AF%E3%83%AD%E3%83%BC%E3%83%AB%E6%93%8D%E4%BD%9C%E3%81%8C%E9%81%85%E3%81%84%E5%95%8F%E9%A1%8C\">ブラウザ閲覧時のスクロール操作が遅い問題</a></li>\n<li><a href=\"#%E3%81%BE%E3%81%A8%E3%82%81\">まとめ</a></li>\n</ul>\n<h2 id=\"ubuntuにxrdpで接続するときにサイドバーを表示する設定\" style=\"position:relative;\"><a href=\"#ubuntu%E3%81%ABxrdp%E3%81%A7%E6%8E%A5%E7%B6%9A%E3%81%99%E3%82%8B%E3%81%A8%E3%81%8D%E3%81%AB%E3%82%B5%E3%82%A4%E3%83%89%E3%83%90%E3%83%BC%E3%82%92%E8%A1%A8%E7%A4%BA%E3%81%99%E3%82%8B%E8%A8%AD%E5%AE%9A\" aria-label=\"ubuntuにxrdpで接続するときにサイドバーを表示する設定 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>UbuntuにXRDPで接続するときにサイドバーを表示する設定</h2>\n<p>UbuntuなどのLinuxマシンを建てたときに、ホストからRDPでアクセスするためにXRDPを使用します。</p>\n<p>この場合、ただXRDPを使うだけなら以下のようなコマンドだけでも問題ないのですが、Ubuntuの場合はアプリケーションランチャーになるサイドバーが表示されなくなってしまいます。</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token function\">sudo</span> <span class=\"token function\">apt</span> <span class=\"token function\">install</span> -y xrdp\n<span class=\"token function\">sudo</span> systemctl <span class=\"token builtin class-name\">enable</span> xrdp</code></pre></div>\n<p>その場合は、ホームディレクトリに<code class=\"language-text\">.xsessionrc</code>を作成し必要な接敵を書き込むことでサイドバーを表示させることができるようになります。</p>\n<p>具体的には、以下のコマンドをコピペするだけです。</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token comment\"># ~/.xsessionrc に書き込む</span>\n<span class=\"token builtin class-name\">export</span> <span class=\"token assign-left variable\">GNOME_SHELL_SESSION_MODE</span><span class=\"token operator\">=</span>ubuntu\n<span class=\"token builtin class-name\">export</span> <span class=\"token assign-left variable\"><span class=\"token environment constant\">XDG_CURRENT_DESKTOP</span></span><span class=\"token operator\">=</span>ubuntu:GNOME\n<span class=\"token builtin class-name\">export</span> <span class=\"token assign-left variable\"><span class=\"token environment constant\">XDG_DATA_DIRS</span></span><span class=\"token operator\">=</span>/usr/share/ubuntu:/usr/local/share:/usr/share:/var/lib/snapd/desktop\n\n<span class=\"token function\">cat</span> <span class=\"token operator\">&lt;&lt;</span><span class=\"token string\">EOF<span class=\"token bash punctuation\"> <span class=\"token operator\">></span> ~/.xsessionrc</span>\nexport XDG_CONFIG_DIRS=/etc/xdg/xdg-ubuntu:/etc/xdg\nEOF</span></code></pre></div>\n<p>上記のコマンドで<code class=\"language-text\">.xsessionrc</code>が作成されたら、以下のコマンドでサービスを再起動します。</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token function\">sudo</span> systemctl restart xrdp</code></pre></div>\n<p>参考：<a href=\"https://www.hiroom2.com/2018/04/28/ubuntu-1804-xrdp-gnome-ja/\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">Ubuntu 18.04: GNOMEデスクトップ環境にXRDPで接続する - Narrow Escape</a></p>\n<h2 id=\"ubuntuにxrdp接続したときに日本語キーボード設定が利かなくなる問題の対処\" style=\"position:relative;\"><a href=\"#ubuntu%E3%81%ABxrdp%E6%8E%A5%E7%B6%9A%E3%81%97%E3%81%9F%E3%81%A8%E3%81%8D%E3%81%AB%E6%97%A5%E6%9C%AC%E8%AA%9E%E3%82%AD%E3%83%BC%E3%83%9C%E3%83%BC%E3%83%89%E8%A8%AD%E5%AE%9A%E3%81%8C%E5%88%A9%E3%81%8B%E3%81%AA%E3%81%8F%E3%81%AA%E3%82%8B%E5%95%8F%E9%A1%8C%E3%81%AE%E5%AF%BE%E5%87%A6\" aria-label=\"ubuntuにxrdp接続したときに日本語キーボード設定が利かなくなる問題の対処 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>UbuntuにXRDP接続したときに日本語キーボード設定が利かなくなる問題の対処</h2>\n<p>デフォルトの状態でXRDP経由のアクセスをした場合、UbuntuのキーボードがUS配列になってしまう場合があります。</p>\n<p>その問題を回避するために、以下の設定を実施します。</p>\n<p>まずは、設定画面を開きます。</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">gnome-session-properties</code></pre></div>\n<p>次に、[Add] をクリックして、NameとCommandに、それぞれ以下を入力します。</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token comment\"># Name</span>\nSet JP keyboard on X startup\n\n<span class=\"token comment\"># Command</span>\nsetxkbmap jp</code></pre></div>\n<p>こちらが設定画面です。</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 500px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/56934c44f3ea4c4b0a5dc05c1cae71ff/0b533/image-15.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 78.33333333333333%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAQCAYAAAAWGF8bAAAACXBIWXMAARlAAAEZQAGA43XUAAAEAklEQVQ4y2WS609TdxjHzxvJmEQ2BVflbrhpAQHLpVwKDLygUYQB4yK0KFBAkciYIoGwaYKJRtwYOJR7W2gtLRSYjiL4dtlf4WuGBMIILXPbZ7+eTbNsJ+eT5znP8zvf8zwnX6k2xovK+P2UqQ5RoVJQkSRikoJLKQqq1QFo04LQCbTqQKpSDslcShZnPKQEUKXy47JyD5djvaiJ2YPUFO/FmYRIUlVqMpNS0SSlk63KEmjITcnhVNpJTqrzyErMJC02lcz4dDLi08g8riYjMYv8xDgaj3uhj/eWkVpU3hQejSQjJI64g0Ec9z9Con80J/yjSFYoSQ+KQn04gljfcJnovaEofUKI3RdGjE8YeYpArqs+5HqSD80qH6Q29V6KI5WcUeah1VVTc1mHrkYrU99QT+PVBhqb9DQ0NaBv1KMTfc85T18v+rpP1bQkfsAXal9aU32ROjUfcfFIJJXZpTwzmzEZDZjNFiwWC/Pz8yz+uIjTuYRz0cnLpZe8WllheeWV3HvufElnrZYbiV60a/bTpt6HdCf3AEXhUZSoL2KcmKJvYJDKqktUVJRTV19H25dtdHTcFnTQ2nqDa83NtF2/Sv+jh0zPztFRU8nNZG86s/24mSYmvHf6ICVRRynPKWOkvYXB2iJGng5iNJkYG3rClHGCScO4jGFsRHx0DNvECIahQZ7NOOi6UkVXug/dOf50Zh1AenBWQUlENJ9nFjMuvjp6/y5rv6ziuVy/brHxZo3fXDv8vusWlT/F/YfcW1lexioEu+u13NH40nNKwd1cP6Tec8JPx5SUZRZhdziYXXjO69evWV1dZXNzk42NDVwuN2/fvsXtcsm17e1tlpyLsuDXei09OR/zIP8QPXkHkfoLAimNUlKcVozNZsUxO8ubtTUh4sLtdrO7uyvnrh2XHHfdu3JtyemUBb+q13E/7wC95wK4J6aUBouC0SdEcSXvPDa7DYeYcn19XX5pZ2fnPe9EPblbTPxOsKdJy8PTfnxzPlBMeRjpyWdHGC4M4mmdhmmb/X+CspDAs6ZnfU/c2toSFnJisTl4equavnOf8O2FYHrPCsHh0nCMpcFMNGYJQRtzQnB+bo4F4bN/4/HdnKj/HR1YhU9tjgWG2qsZOK/gu4IQeW1pvCwSS1kIhqbcfyacw26fwT4zI37BzPvc/p/carVin3/B8G0d319QMFAYSp9YWzKURzJdEcrUtRyMwmse33kwCyymccwmg/xsmTQIjEyZPBiYFH40mCYZulnJk4LDPC4Ko78gCMlYHsGzqmima2Kw1J5gui4Je0MKiw0nWO4+yw9d+by4lsxPrQn83K7BeSubqbpkxqvjGa1KYLTiGMMlYTwuDGHgYjB/AYgNGXLsrNnRAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <picture>\n          <source\n              srcset=\"/static/56934c44f3ea4c4b0a5dc05c1cae71ff/8ac56/image-15.webp 240w,\n/static/56934c44f3ea4c4b0a5dc05c1cae71ff/d3be9/image-15.webp 480w,\n/static/56934c44f3ea4c4b0a5dc05c1cae71ff/b0a15/image-15.webp 500w\"\n              sizes=\"(max-width: 500px) 100vw, 500px\"\n              type=\"image/webp\"\n            />\n          <source\n            srcset=\"/static/56934c44f3ea4c4b0a5dc05c1cae71ff/8ff5a/image-15.png 240w,\n/static/56934c44f3ea4c4b0a5dc05c1cae71ff/e85cb/image-15.png 480w,\n/static/56934c44f3ea4c4b0a5dc05c1cae71ff/0b533/image-15.png 500w\"\n            sizes=\"(max-width: 500px) 100vw, 500px\"\n            type=\"image/png\"\n          />\n          <img\n            class=\"gatsby-resp-image-image\"\n            src=\"/static/56934c44f3ea4c4b0a5dc05c1cae71ff/0b533/image-15.png\"\n            alt=\"https://yukituna.com/wp-content/uploads/2021/11/image-15.png\"\n            title=\"https://yukituna.com/wp-content/uploads/2021/11/image-15.png\"\n            loading=\"lazy\"\n            style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n          />\n        </picture>\n  </a>\n    </span></p>\n<p>これでOSを再起動すると、次回のアクセスからJIS配列が反映されるようになりました。</p>\n<p>参考：<a href=\"https://qiita.com/vochicong/items/6452ac54bde56b0e0bb3\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">Ubuntu で日本語キーボードレイアウト - Qiita</a></p>\n<h2 id=\"ブラウザ閲覧時のスクロール操作が遅い問題\" style=\"position:relative;\"><a href=\"#%E3%83%96%E3%83%A9%E3%82%A6%E3%82%B6%E9%96%B2%E8%A6%A7%E6%99%82%E3%81%AE%E3%82%B9%E3%82%AF%E3%83%AD%E3%83%BC%E3%83%AB%E6%93%8D%E4%BD%9C%E3%81%8C%E9%81%85%E3%81%84%E5%95%8F%E9%A1%8C\" aria-label=\"ブラウザ閲覧時のスクロール操作が遅い問題 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>ブラウザ閲覧時のスクロール操作が遅い問題</h2>\n<p>XRDP経由でスクロール設定が反映されない問題は既知事象なのですが、長らく修正されていないようです。</p>\n<p>参考；<a href=\"https://github.com/neutrinolabs/xorgxrdp/issues/150\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">Vertical scroll speed too fast (xrdpMouse) · Issue #150 · neutrinolabs/xorgxrdp</a></p>\n<p>imwheelなどのツールを試しましたが効果はありませんでした。</p>\n<h2 id=\"まとめ\" style=\"position:relative;\"><a href=\"#%E3%81%BE%E3%81%A8%E3%82%81\" aria-label=\"まとめ permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>まとめ</h2>\n<p>個人的にハマった問題の解消方法をまとめました。</p>\n<p>Ubuntuのセットアップでまた困ったことがあれば、都度追記していきたいと思います。</p>","fields":{"slug":"/linux-trouble-ubuntu-rdp","tagSlugs":["/tag/linux/","/tag/ubuntu/","/tag/rdp/","/tag/トラブルシューティング/"]},"frontmatter":{"date":"2021-11-30","description":"この記事では、Ubuntuマシンに対してXRDP接続を行ったときに発生した問題についてまとめています。","tags":["Linux","Ubuntu","RDP","トラブルシューティング"],"title":"Ubuntu20.04にXRDP接続した際に起きた問題についてのまとめ","socialImage":{"publicURL":"/static/201705e211b09a16a2edfeb08d417e60/linux-trouble-ubuntu-rdp.png"}}}},"pageContext":{"slug":"/linux-trouble-ubuntu-rdp"}},"staticQueryHashes":["251939775","401334301","825871152"]}