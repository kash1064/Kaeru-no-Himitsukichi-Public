{"componentChunkName":"component---src-templates-post-template-js","path":"/note-gdb-wt-wsl","result":{"data":{"markdownRemark":{"id":"2cf29e7b-3ecc-58f0-8fcf-da29891e8849","html":"<!-- omit in toc -->\n<h2 id=\"もくじ\" style=\"position:relative;\"><a href=\"#%E3%82%82%E3%81%8F%E3%81%98\" aria-label=\"もくじ permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>もくじ</h2>\n<ul>\n<li><a href=\"#%E7%94%BB%E9%9D%A2%E3%81%AE%E5%88%86%E5%89%B2%E5%B9%85%E3%82%92%E5%A4%89%E6%9B%B4%E3%81%99%E3%82%8B%E6%96%B9%E6%B3%95\">画面の分割幅を変更する方法</a></li>\n<li>\n<p><a href=\"#%E3%81%8A%E3%81%BE%E3%81%91pwntools-%E3%81%A8-gdb-peda-%E3%82%92-wsl2--windows-terminal-%E3%81%A7%E4%BD%BF%E7%94%A8%E3%81%99%E3%82%8B%E5%A0%B4%E5%90%88%E3%81%AE%E5%95%8F%E9%A1%8C\">おまけ：pwntools と gdb-peda を WSL2 &#x26; Windows Terminal で使用する場合の問題</a></p>\n<ul>\n<li><a href=\"#%E8%A7%A3%E6%B1%BA%E6%96%B9%E6%B3%95-1tmux-%E3%82%92%E4%BD%BF%E7%94%A8%E3%81%99%E3%82%8B\">解決方法 1：tmux を使用する</a></li>\n<li><a href=\"#%E8%A7%A3%E6%B1%BA%E6%96%B9%E6%B3%95-2gef-%E3%82%84-pwndbg-%E3%82%92%E4%BD%BF%E7%94%A8%E3%81%99%E3%82%8B\">解決方法 2：gef や pwndbg を使用する</a></li>\n</ul>\n</li>\n<li><a href=\"#%E3%81%BE%E3%81%A8%E3%82%81\">まとめ</a></li>\n</ul>\n<p>WSL2 と Windows Terminal で pwntools のデバッグ機能を使う際に、コンテキスト設定で画面の分割比率を変更する方法についてのメモ書きです。</p>\n<p>ついでに、WSL2 &#x26; Windows Terminal 環境で gdb-peda を使用する際に pwntools を使うとレジスタ情報を参照できなくなる問題の回避策についてもまとめています。</p>\n<h2 id=\"画面の分割幅を変更する方法\" style=\"position:relative;\"><a href=\"#%E7%94%BB%E9%9D%A2%E3%81%AE%E5%88%86%E5%89%B2%E5%B9%85%E3%82%92%E5%A4%89%E6%9B%B4%E3%81%99%E3%82%8B%E6%96%B9%E6%B3%95\" aria-label=\"画面の分割幅を変更する方法 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>画面の分割幅を変更する方法</h2>\n<p>WSL2 &#x26; Windows Terminal で pwntools の gdb.debug() を使用する場合、デフォルトでは以下のコマンドでデバッグターミナルが起動されるようです。</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token punctuation\">[</span><span class=\"token string\">'/mnt/c/Windows/system32/cmd.exe'</span>, <span class=\"token string\">'/c'</span>, <span class=\"token string\">'start'</span>, <span class=\"token string\">'wt.exe'</span>, <span class=\"token string\">'-w'</span>, <span class=\"token string\">'0'</span>, <span class=\"token string\">'split-pane'</span>, <span class=\"token string\">'-d'</span>, <span class=\"token string\">'.'</span>, <span class=\"token string\">'wsl.exe'</span>, <span class=\"token string\">'-d'</span>, <span class=\"token string\">'Ubuntu'</span>, <span class=\"token string\">'bash'</span>, <span class=\"token string\">'-c'</span>, <span class=\"token string\">'/tmp/tmpnhyc4xx1'</span><span class=\"token punctuation\">]</span></code></pre></div>\n<p>このコンテキストでは、<code class=\"language-text\">wt.exe -w 0 split-pane -d .</code> を使用して現在使用中のウインドウ内でデフォルトプロファイルを使用してペイン分割したターミナルを起動します。</p>\n<p>参考：<a href=\"https://learn.microsoft.com/ja-jp/windows/terminal/command-line-arguments?tabs=windows\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">Windows ターミナルのコマンド ライン引数 | Microsoft Learn</a></p>\n<p>しかし、このままではウインドウの分割幅が 5:5 に強制されてしまい、あとから変更できなくなるため、デバッグを行うには少々不便です。</p>\n<p>そのため、Window Terminal の split-pane 機能の <code class=\"language-text\">-s</code> オプションにより分割幅の指定をコンテキストに加えることで、デバッグウインドウのサイズを大きくすることができます。</p>\n<p>実際に私が使用しているコンテキストは以下のものです。</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">context.terminal <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token string\">\"/mnt/c/Windows/system32/cmd.exe\"</span>, <span class=\"token string\">\"/c\"</span>, <span class=\"token string\">\"start\"</span>, <span class=\"token string\">\"wt.exe\"</span>, <span class=\"token string\">\"-w\"</span>, <span class=\"token string\">\"0\"</span>, <span class=\"token string\">\"sp\"</span>, <span class=\"token string\">\"-s\"</span>, <span class=\"token string\">\".7\"</span>, <span class=\"token string\">\"-d\"</span>, <span class=\"token string\">\".\"</span>, <span class=\"token string\">\"wsl.exe\"</span>, <span class=\"token string\">'-d'</span>, <span class=\"token string\">\"Ubuntu\"</span>, <span class=\"token string\">\"bash\"</span>, <span class=\"token string\">\"-c\"</span><span class=\"token punctuation\">]</span></code></pre></div>\n<p>この設定を pwntools を使用する Python スクリプト内で定義することで、以下のように分割時の画面の比率を 3:7 として、デバッグウインドウをより広くすることができます。</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 960px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/dbedb75ef3634c6b0f3d0db6309faa31/c587f/image-20240725233901766.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 60%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAMCAYAAABiDJ37AAAACXBIWXMAAAsTAAALEwEAmpwYAAACXElEQVQoz01Ta4+bMBDk1AsQG2MbsHkZAwlJ7nqnk679/79tOpBK7YfVmodmZ3bGSR9bVM6gGwOW64Z5vSLEGbf7DdfrG+ZlwzJHzHwXpwl93/+t7r/zs8ZxRFJ7B98ohEYgO52QvLzgNU2xXWZMw4zQEXAIGLsIVztobWBMBVvVsJbd2qOMsSgKhWQg6hoDYlOjZWmjIQuJ+XLF2A+YfY/YTxhihLYeStcojed/e/GsKw6pjr4PSULTHPImyqoJqFSBs8gxLQ+0bj3YTd2ItnUQUnBYcXQhniWlJDOJLEuxLAuShoD7Psqy5KQSKWXvkh+3FdvosC4tpuC5vxm993Baoyao5WBtCUZAxecsy7CuKyU7T+SZCx3guM+CH9M8x3WJeBs8LnHFQMm+HmEoWRYGpaqoxEKVmv9rng2yXGLlmpKBUweChSkcfRh62LrCsIyYtwWutSitgBJkVFRwinvj8s9kJvYiAakU0jQnsQt36Bwmgu2A2hqcKDfNM0Sy3i4bvLeo2gZNH1BVDh3dDLaDVy1cyefCopcWtVH4+XEnYNsihABHh5zYmQik+4IvF2zbA7bRcF3DaHjkQhJEY6x71MqjUhxEyZ5r0Eri9rg+XZ4Y2DI7o0wSyNdXCDL8+PrG+83hthrcI7O4RyfEIzaCIIKyhWQVJYTSJCGw8FIkkaFc44SO5tidIQEVGX79+o3vT4+vu8FnmPHgbqdIlxmjnuCVrY9kFLKgKeqfy4aAe57y8xk/9ptClid2V3c0JKIbFijLDJYVHeZtKD2LaShrVkNDnj07a7p8xx/XFCiKn2cj6wAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <picture>\n          <source\n              srcset=\"/static/dbedb75ef3634c6b0f3d0db6309faa31/8ac56/image-20240725233901766.webp 240w,\n/static/dbedb75ef3634c6b0f3d0db6309faa31/d3be9/image-20240725233901766.webp 480w,\n/static/dbedb75ef3634c6b0f3d0db6309faa31/e46b2/image-20240725233901766.webp 960w,\n/static/dbedb75ef3634c6b0f3d0db6309faa31/f992d/image-20240725233901766.webp 1440w,\n/static/dbedb75ef3634c6b0f3d0db6309faa31/2fa9d/image-20240725233901766.webp 1863w\"\n              sizes=\"(max-width: 960px) 100vw, 960px\"\n              type=\"image/webp\"\n            />\n          <source\n            srcset=\"/static/dbedb75ef3634c6b0f3d0db6309faa31/8ff5a/image-20240725233901766.png 240w,\n/static/dbedb75ef3634c6b0f3d0db6309faa31/e85cb/image-20240725233901766.png 480w,\n/static/dbedb75ef3634c6b0f3d0db6309faa31/d9199/image-20240725233901766.png 960w,\n/static/dbedb75ef3634c6b0f3d0db6309faa31/07a9c/image-20240725233901766.png 1440w,\n/static/dbedb75ef3634c6b0f3d0db6309faa31/c587f/image-20240725233901766.png 1863w\"\n            sizes=\"(max-width: 960px) 100vw, 960px\"\n            type=\"image/png\"\n          />\n          <img\n            class=\"gatsby-resp-image-image\"\n            src=\"/static/dbedb75ef3634c6b0f3d0db6309faa31/d9199/image-20240725233901766.png\"\n            alt=\"image-20240725233901766\"\n            title=\"image-20240725233901766\"\n            loading=\"lazy\"\n            style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n          />\n        </picture>\n  </a>\n    </span></p>\n<h2 id=\"おまけpwntools-と-gdb-peda-を-wsl2--windows-terminal-で使用する場合の問題\" style=\"position:relative;\"><a href=\"#%E3%81%8A%E3%81%BE%E3%81%91pwntools-%E3%81%A8-gdb-peda-%E3%82%92-wsl2--windows-terminal-%E3%81%A7%E4%BD%BF%E7%94%A8%E3%81%99%E3%82%8B%E5%A0%B4%E5%90%88%E3%81%AE%E5%95%8F%E9%A1%8C\" aria-label=\"おまけpwntools と gdb peda を wsl2  windows terminal で使用する場合の問題 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>おまけ：pwntools と gdb-peda を WSL2 &#x26; Windows Terminal で使用する場合の問題</h2>\n<p>原因は全く不明ながら、Windows Terminal と WSL2 の環境で pwntools の gdb.debug() を使用すると、gdb-peda のレジスタビューが機能しなくなる問題が発生します。</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 730px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/5042b463804bdbc6ed207de3bd2174b0/e9beb/image-20240725205328140.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 66.66666666666666%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAANCAYAAACpUE5eAAAACXBIWXMAAAsTAAALEwEAmpwYAAACSElEQVQ4y3VTa3ObMBDkQxrbkpAAPQABAb8dx2/HjT2x+///1fbseBLaph92brTDHXe3ewH3FjyzqKopTPGErovR1yW89ugWCTJbwadTsLKk7wwaV2JuaxiXEWchKJd7A1nlCGOHQGmL8WyOwXCKp2aIZjRG6nIkiYMyBmmaw6YNWJSAKQUlY6gwhpARuCLIDwhFHPGBMRrn93dsNxssFi/Y73bIModYhdBSoXYOlgrFjMEwjpAzMALnHKIFfueCNM1wPB6xXK7w/PyM9XoDR2NkfQcZSvBOB4KKKSEQcQFBkYuvyFvvKwKtE5zPZ2yow/V6hcNhj6KsoV2NKJLwPofWMRjrUeJHJ+K/oA5lZLBabTGZzjCZzDCjfY7GMxpLITEp5osNqv4c2nri5G1PXET/4s4Hm+0etnjBD7VAV+/RSXaUXGD+soIvajw8MnSYQZf9mcjDFj55heByOaEavOIxOYClv9BzF4wnU5yObyTSAksSarmY00rWGI9HkDK8j/3d+DTy29sBRbPFY7ynYmcwd8KUxj6RUFf1L5cL9vtX8mmFMAw/1G2J8Lc4wfH4E77Z4YE6vHbXs0dUZYNdM8CMPDoZjlA3DYnj8VTXtwLWOhhrkROnyauM3X9y7bCqx2STAZnVQ0RDMnAN6RKY3CNOMvREQtC0oy8IaVpv04rJtWCNsixQkkVk5METuorcIbQ58ryBTiLEEafdqU8zt2Pb4LeRp9TJsqpR0EWIKKXz6tNJDShSYenhbIQ8DcmT8bf7a+/wWvQ3itJGVlINJrwAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <picture>\n          <source\n              srcset=\"/static/5042b463804bdbc6ed207de3bd2174b0/8ac56/image-20240725205328140.webp 240w,\n/static/5042b463804bdbc6ed207de3bd2174b0/d3be9/image-20240725205328140.webp 480w,\n/static/5042b463804bdbc6ed207de3bd2174b0/87ca7/image-20240725205328140.webp 730w\"\n              sizes=\"(max-width: 730px) 100vw, 730px\"\n              type=\"image/webp\"\n            />\n          <source\n            srcset=\"/static/5042b463804bdbc6ed207de3bd2174b0/8ff5a/image-20240725205328140.png 240w,\n/static/5042b463804bdbc6ed207de3bd2174b0/e85cb/image-20240725205328140.png 480w,\n/static/5042b463804bdbc6ed207de3bd2174b0/e9beb/image-20240725205328140.png 730w\"\n            sizes=\"(max-width: 730px) 100vw, 730px\"\n            type=\"image/png\"\n          />\n          <img\n            class=\"gatsby-resp-image-image\"\n            src=\"/static/5042b463804bdbc6ed207de3bd2174b0/e9beb/image-20240725205328140.png\"\n            alt=\"image-20240725205328140\"\n            title=\"image-20240725205328140\"\n            loading=\"lazy\"\n            style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n          />\n        </picture>\n  </a>\n    </span></p>\n<p>同じ環境で普通に gdb コマンドを実行する分にはレジスタビューの情報も正常に表示されるため、pwntools の gdb モジュール(というよりは恐らく gdbserver ?) を利用しているのが原因なような気がします。</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 960px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/2587310660db1eb23f8f4743356dedd9/8d68c/image-20240725205359559.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 68.33333333333333%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAOCAYAAAAvxDzwAAAACXBIWXMAAAsTAAALEwEAmpwYAAAB0klEQVQ4y51T2W7bMBA0Jd6HSJHUYbmW28I2HBT5/8+brly3aNAmSPIwWAqSZpczszuXA5Tr0SqqxsH5AOs7CBPAWgHWtAT+AJ1bjt2OEXb/R9p3GI435DogRiIS4vWP3wNfHWL5Cl9PGOc9xml4TMA+R9gXh+IyUt9jmiY4Z2G0/vyEeY6Y5pX08xBKQ1LdtQpcSFhrYZ0j2PvZhwDvPTV1VDe9HaSULwm7wjGkgDpOWMiQw3JEnhbUWqjRAKcVSorwnaMmDaQS4Jz/QdM0LwnjELBfV9T9gIG6W6OQS0ItGbJTSDRpVArCcUpCA27IZfaGvut6wtPTDefLBXWq0JpDUTwEayD++eEdZh2PX/D8/AO32xWHw0JXkgibMVQZfcA+asq8HFDm4x15mJBKRaJM2pDoaps+v8F+PdP0bxJ+O18g4wGqfEfXV6xDQeYCmjZCW0PuGhhy2JG+ilLQkhHGGLTtK8Tn6xU6r7DjBX0ecUoJM2UyEIGgSORSoCiXWzykFLRJpDHJsW3U325vuDep8wKrA3QYoSNtTS7waQRXluAgbITQnjLY3RG6+MihR6Bcblnczlsu9bYQp9wjG7qKoolcolh09EKSKQyMfXz9fgJfyDAbTrL39gAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <picture>\n          <source\n              srcset=\"/static/2587310660db1eb23f8f4743356dedd9/8ac56/image-20240725205359559.webp 240w,\n/static/2587310660db1eb23f8f4743356dedd9/d3be9/image-20240725205359559.webp 480w,\n/static/2587310660db1eb23f8f4743356dedd9/e46b2/image-20240725205359559.webp 960w,\n/static/2587310660db1eb23f8f4743356dedd9/5dcdf/image-20240725205359559.webp 1234w\"\n              sizes=\"(max-width: 960px) 100vw, 960px\"\n              type=\"image/webp\"\n            />\n          <source\n            srcset=\"/static/2587310660db1eb23f8f4743356dedd9/8ff5a/image-20240725205359559.png 240w,\n/static/2587310660db1eb23f8f4743356dedd9/e85cb/image-20240725205359559.png 480w,\n/static/2587310660db1eb23f8f4743356dedd9/d9199/image-20240725205359559.png 960w,\n/static/2587310660db1eb23f8f4743356dedd9/8d68c/image-20240725205359559.png 1234w\"\n            sizes=\"(max-width: 960px) 100vw, 960px\"\n            type=\"image/png\"\n          />\n          <img\n            class=\"gatsby-resp-image-image\"\n            src=\"/static/2587310660db1eb23f8f4743356dedd9/d9199/image-20240725205359559.png\"\n            alt=\"image-20240725205359559\"\n            title=\"image-20240725205359559\"\n            loading=\"lazy\"\n            style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n          />\n        </picture>\n  </a>\n    </span></p>\n<h3 id=\"解決方法-1tmux-を使用する\" style=\"position:relative;\"><a href=\"#%E8%A7%A3%E6%B1%BA%E6%96%B9%E6%B3%95-1tmux-%E3%82%92%E4%BD%BF%E7%94%A8%E3%81%99%E3%82%8B\" aria-label=\"解決方法 1tmux を使用する permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>解決方法 1：tmux を使用する</h3>\n<p>原因の特定には至ってませんがとりあえず tmux を使用することで問題の発生を回避できることは確認しました。</p>\n<p>まずは pwntools のスクリプトを実行するターミナルで tmux を起動します。</p>\n<p>続けて、<code class=\"language-text\">context.terminal</code> を以下のように置き換えた pwntools のスクリプトを実行します。</p>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\">context<span class=\"token punctuation\">.</span>terminal <span class=\"token operator\">=</span>  <span class=\"token punctuation\">[</span><span class=\"token string\">\"tmux\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"splitw\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"-h\"</span><span class=\"token punctuation\">]</span></code></pre></div>\n<p>これで、WSL2 &#x26; Windows Terminal の環境でも gdb-peda のレジスタ情報を参照できるようになります。</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 960px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/420c9a4b6d1f26f4bc4627113f67a538/46435/image-20240725205624716.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 59.583333333333336%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAMCAYAAABiDJ37AAAACXBIWXMAAAsTAAALEwEAmpwYAAAB60lEQVQoz51S246bMBTEYAzmYjCYS2AJWbKbqspD1Ye2//9l07EbVanUVaU+TGL5HMZzZk60zhPWZcL764zr9cC6rgET77uuC3CDw7KtGOeF9zNOC3u2HeM4oe8dejcEDM4hsvwZW429TZHLBFEsEMcxhBCIoigglhGaqUMzbLB8oDYGKst+1//AwZevbweO1x3b9oKmbaAUyfM8QEqeSwXrLFp7wnreMFN99hHh3HfY2ORHbG0LrXVQ+NyUKAE3GXSthSlLlHWDsiph6gploSHT5IlwHLDvZxhTo67roMoTSimDiqIooIscdmwx0L/eNPS1R9dTcVWgYk1qSVseIo6XFZfLTm8s6sbAEJ4kVSqo9Y8oleFgYPf750CkkgTJ38b1eFsXvH+64eRH5jheaUNSTXU5CXUgl5jZN64XOCZraVPVtBAxR/XhhQAfIV7p33G7odcFRl44+mKSGC1hOF5VVii0wnK+IOsPTMOM27ZxbV6CPSVF+Em8RWEzziyclhMsV8HoHFWaQpNYESHlRCKl6Qv7Wsct6Ac01lE1vU5zqFyjqjkRBaWpRJTIR0IxIR4+iKezT1kKdJWGShUSqlF5xo/jsLPC723y61/Eof8Dc/8X4z3G+u0f+PGAP39/4Kk+fxGYvwoMd4GfyggSV+CxVG8AAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <picture>\n          <source\n              srcset=\"/static/420c9a4b6d1f26f4bc4627113f67a538/8ac56/image-20240725205624716.webp 240w,\n/static/420c9a4b6d1f26f4bc4627113f67a538/d3be9/image-20240725205624716.webp 480w,\n/static/420c9a4b6d1f26f4bc4627113f67a538/e46b2/image-20240725205624716.webp 960w,\n/static/420c9a4b6d1f26f4bc4627113f67a538/f992d/image-20240725205624716.webp 1440w,\n/static/420c9a4b6d1f26f4bc4627113f67a538/58129/image-20240725205624716.webp 1885w\"\n              sizes=\"(max-width: 960px) 100vw, 960px\"\n              type=\"image/webp\"\n            />\n          <source\n            srcset=\"/static/420c9a4b6d1f26f4bc4627113f67a538/8ff5a/image-20240725205624716.png 240w,\n/static/420c9a4b6d1f26f4bc4627113f67a538/e85cb/image-20240725205624716.png 480w,\n/static/420c9a4b6d1f26f4bc4627113f67a538/d9199/image-20240725205624716.png 960w,\n/static/420c9a4b6d1f26f4bc4627113f67a538/07a9c/image-20240725205624716.png 1440w,\n/static/420c9a4b6d1f26f4bc4627113f67a538/46435/image-20240725205624716.png 1885w\"\n            sizes=\"(max-width: 960px) 100vw, 960px\"\n            type=\"image/png\"\n          />\n          <img\n            class=\"gatsby-resp-image-image\"\n            src=\"/static/420c9a4b6d1f26f4bc4627113f67a538/d9199/image-20240725205624716.png\"\n            alt=\"image-20240725205624716\"\n            title=\"image-20240725205624716\"\n            loading=\"lazy\"\n            style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n          />\n        </picture>\n  </a>\n    </span></p>\n<h3 id=\"解決方法-2gef-や-pwndbg-を使用する\" style=\"position:relative;\"><a href=\"#%E8%A7%A3%E6%B1%BA%E6%96%B9%E6%B3%95-2gef-%E3%82%84-pwndbg-%E3%82%92%E4%BD%BF%E7%94%A8%E3%81%99%E3%82%8B\" aria-label=\"解決方法 2gef や pwndbg を使用する permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>解決方法 2：gef や pwndbg を使用する</h3>\n<p>もう 1 つの解決方法として、そもそも gdb-peda の利用をやめる方法があります。</p>\n<p>確認したところ、gef や pwndbg を使用する場合には WSL2&#x26;Windows Terminal の環境で pwntools の gdb.debug() を使用する場合でもレジスタ情報を含む情報を正常に表示することができました。</p>\n<p>そのため、私はずっと gdb-peda を愛用してきたものの、残念ながらこれを機に pwndbg に切り替えることにしました。</p>\n<p>参考：<a href=\"https://github.com/pwndbg/pwndbg\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">pwndbg/pwndbg: Exploit Development and Reverse Engineering with GDB Made Easy</a></p>\n<p>参考：<a href=\"https://github.com/hugsy/gef\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">hugsy/gef: GEF (GDB Enhanced Features) - a modern experience for GDB with advanced debugging capabilities for exploit devs &#x26; reverse engineers on Linux</a></p>\n<h2 id=\"まとめ\" style=\"position:relative;\"><a href=\"#%E3%81%BE%E3%81%A8%E3%82%81\" aria-label=\"まとめ permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>まとめ</h2>\n<p>メモ書きです。</p>","fields":{"slug":"/note-gdb-wt-wsl","tagSlugs":["/tag/notes/","/tag/備忘録/","/tag/ctf/"]},"frontmatter":{"date":"2024-07-24","description":"WSL2 と Windows Terminal で pwntools のデバッグ機能を使う際に、コンテキスト設定で画面の分割比率を変更する方法についてまとめます","tags":["Notes","備忘録","CTF"],"title":"WSL2 と Windows Terminal で pwntools のデバッグ機能を使う際に、コンテキスト設定で画面の分割比率を変更する","socialImage":{"publicURL":"/static/7e9f3b6ff4cf08a2700f074829d32f71/note-gdb-wt-wsl.png"}}}},"pageContext":{"slug":"/note-gdb-wt-wsl"}},"staticQueryHashes":["251939775","401334301","825871152"]}