{"componentChunkName":"component---src-templates-post-template-js","path":"/windbg-gflags-tutorial","result":{"data":{"markdownRemark":{"id":"b2967748-4019-5abf-a0bf-d2dbb588c4d7","html":"<p>先日作成した <a href=\"/windbg-basics-001\">WinDbg でダンプ解析、ライブデバッグを行う時のチートシート</a> からの派生で、 Windows のトラブルシューティング時に覚えておくと便利な GFlags の設定値についてまとめました。</p>\n<p>個人的に役に立つと感じる設定のみ記載していますが、こちらも自分用のメモ書きなので、また今後別の場面で活用した設定などあれば追記していきたいと思います。</p>\n<!-- omit in toc -->\n<h2 id=\"もくじ\" style=\"position:relative;\"><a href=\"#%E3%82%82%E3%81%8F%E3%81%98\" aria-label=\"もくじ permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>もくじ</h2>\n<ul>\n<li><a href=\"#%E3%81%BE%E3%81%88%E3%81%8C%E3%81%8D\">まえがき</a></li>\n<li><a href=\"#gflags-%E3%81%A8%E3%81%AF\">GFlags とは</a></li>\n<li>\n<p><a href=\"#%E3%82%B0%E3%83%AD%E3%83%BC%E3%83%90%E3%83%AB%E3%83%95%E3%83%A9%E3%82%B0%E3%81%A8%E3%81%AF\">グローバルフラグとは</a></p>\n<ul>\n<li><a href=\"#%E3%82%B7%E3%82%B9%E3%83%86%E3%83%A0%E3%81%AE%E3%82%B0%E3%83%AD%E3%83%BC%E3%83%90%E3%83%AB%E3%83%95%E3%83%A9%E3%82%B0\">システムのグローバルフラグ</a></li>\n<li><a href=\"#%E3%82%A4%E3%83%A1%E3%83%BC%E3%82%B8%E3%83%95%E3%82%A1%E3%82%A4%E3%83%AB%E3%81%94%E3%81%A8%E3%81%AE%E3%82%B0%E3%83%AD%E3%83%BC%E3%83%90%E3%83%AB%E3%83%95%E3%83%A9%E3%82%B0\">イメージファイルごとのグローバルフラグ</a></li>\n</ul>\n</li>\n<li><a href=\"#%E3%82%AB%E3%83%BC%E3%83%8D%E3%83%AB%E3%83%A2%E3%83%BC%E3%83%89%E3%82%B9%E3%82%BF%E3%83%83%E3%82%AF%E3%82%92%E3%83%9A%E3%83%BC%E3%82%B8%E3%82%A2%E3%82%A6%E3%83%88%E3%81%95%E3%82%8C%E3%81%AA%E3%81%84%E3%82%88%E3%81%86%E3%81%AB%E3%81%99%E3%82%8B\">カーネルモードスタックをページアウトされないようにする</a></li>\n<li><a href=\"#%E3%82%A4%E3%83%A1%E3%83%BC%E3%82%B8%E3%83%AD%E3%83%BC%E3%83%80%E3%81%AE%E5%87%A6%E7%90%86%E3%82%92%E8%A6%8B%E3%82%8B\">イメージローダの処理を見る</a></li>\n<li><a href=\"#%E3%83%97%E3%83%AD%E3%82%B0%E3%83%A9%E3%83%A0%E3%81%AE%E8%B5%B7%E5%8B%95%E6%99%82%E3%81%AB%E3%83%87%E3%83%90%E3%83%83%E3%82%AC%E3%82%92%E8%B5%B7%E5%8B%95%E3%81%99%E3%82%8B\">プログラムの起動時にデバッガを起動する</a></li>\n<li><a href=\"#%E3%83%97%E3%83%AD%E3%82%B0%E3%83%A9%E3%83%A0%E3%81%AE%E7%B5%82%E4%BA%86%E3%82%92%E7%9B%A3%E8%A6%96%E3%81%99%E3%82%8B\">プログラムの終了を監視する</a></li>\n<li><a href=\"#%E3%81%BE%E3%81%A8%E3%82%81\">まとめ</a></li>\n</ul>\n<h2 id=\"まえがき\" style=\"position:relative;\"><a href=\"#%E3%81%BE%E3%81%88%E3%81%8C%E3%81%8D\" aria-label=\"まえがき permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>まえがき</h2>\n<p>本記事の内容はすべて一般に公開されている情報や、出版された書籍、または個人の検証環境で動作確認を実施した結果のみを元に作成しています。</p>\n<p>関連記事はこちら。</p>\n<ul>\n<li><a href=\"/windbg-basics-001\">WinDbg でダンプ解析、ライブデバッグを行う時のチートシート</a></li>\n<li><a href=\"/windbg-process-001\">WinDbg で Windows のプロセス情報を読むためのメモ書き</a></li>\n</ul>\n<h2 id=\"gflags-とは\" style=\"position:relative;\"><a href=\"#gflags-%E3%81%A8%E3%81%AF\" aria-label=\"gflags とは permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>GFlags とは</h2>\n<p>GFlags(Global Flags Editor) は、特定のデバッグ機能の有効化/無効化に使用できるツールです。</p>\n<p>Debugging Tools for Windows 10 (WinDbg) に含まれているので、Classic の WinDbg をインストールしている環境の場合は、WinDbg と同じフォルダ(<code class=\"language-text\">C:\\Program Files (x86)\\Windows Kits\\10\\Debuggers\\x64</code>など)に gflags.exe と gflags.dll が配置されています。</p>\n<p>参考：<a href=\"https://learn.microsoft.com/en-us/windows-hardware/drivers/debugger/gflags\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">GFlags - Windows drivers | Microsoft Learn</a></p>\n<p>GFlags は CLI および GUI の両方で使用することができ、これを利用してシステムやイメージ(プログラム)のグローバルフラグを操作することが可能です。</p>\n<p>コマンドで GFlags を操作する方法は以下に記載されています。</p>\n<p>参考：<a href=\"https://learn.microsoft.com/en-us/windows-hardware/drivers/debugger/gflags-commands\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">GFlags Commands - Windows drivers | Microsoft Learn</a></p>\n<h2 id=\"グローバルフラグとは\" style=\"position:relative;\"><a href=\"#%E3%82%B0%E3%83%AD%E3%83%BC%E3%83%90%E3%83%AB%E3%83%95%E3%83%A9%E3%82%B0%E3%81%A8%E3%81%AF\" aria-label=\"グローバルフラグとは permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>グローバルフラグとは</h2>\n<p>グローバルフラグは、Windows のシステムやイメージのデバッグやトレースをサポートするための変数です。</p>\n<h3 id=\"システムのグローバルフラグ\" style=\"position:relative;\"><a href=\"#%E3%82%B7%E3%82%B9%E3%83%86%E3%83%A0%E3%81%AE%E3%82%B0%E3%83%AD%E3%83%BC%E3%83%90%E3%83%AB%E3%83%95%E3%83%A9%E3%82%B0\" aria-label=\"システムのグローバルフラグ permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>システムのグローバルフラグ</h3>\n<p>システムのグローバルフラグは、 NtGlobalFlag と NtGlobalFlag2 の 2 つのグローバル変数で管理されています。</p>\n<p>これらのシステム変数は<code class=\"language-text\">HKEY_LOCAL_MACHINE\\SYSTEM\\CurrentControlSet\\Control\\Session Manager</code>で定義されていて、システムの起動時に初期化されます。(既定値はどちらも 0 で、グローバルフラグは設定されていません。)</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 825px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/782d82840ff959b670976f6c36059172/d4c13/image-20230506234025475.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 47.08333333333333%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAJCAYAAAAywQxIAAAACXBIWXMAAAsTAAALEwEAmpwYAAABoklEQVQoz22S626bQBCF/cbpa/VHpEh9hf6o2kRVBebOAo6BZddcsrbBuMDp7IZYrpSVVrOI0Tdn5szmICU4FyhfHSRxCClrVLyiKCGFRMoYWBTjcKghhEDTNBjHEV3XmXff9zifz3Qp0nsDLJgXYFQ+yj2jRIX7Iw8d4ihDWRRo6gYJS3BURwN1XdcUvj+beZ7wdwKGNx+Rb8F1fJyOp1tCTYoDL0CSZmibFmEQIt/nGIYBHgF1AaWU+dZFbsC+deFtf1MbHaZp+g8oUoa2yvHWdmAxQ5EXGK8jjYobuB5FTy1fLpc7hZ2LjHmU+A6bl8VELls8fA3x5ZGhbhXNOUZVCVM025FqmuWnLV9UYICnU29+LCuwFB2efqT49pyCV7UBCjJLt2dZFoqyvOXrewOOKjTAXbY3zi1rRU7AHcvAs8i4z1bg9XrF1nGoSPU5cOg8MsWGbTkQ1NI8rwp5A9/PEEURzasgUwKUJTcKbdtGTu5/wFbgbIDH2sOfl+/49fPF7J9WoFcqSV4R+rFRpg2IyOWyeAdu7S1yMkjv4ceI/gHhoKd+74M3pQAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <picture>\n          <source\n              srcset=\"/static/782d82840ff959b670976f6c36059172/8ac56/image-20230506234025475.webp 240w,\n/static/782d82840ff959b670976f6c36059172/d3be9/image-20230506234025475.webp 480w,\n/static/782d82840ff959b670976f6c36059172/0244e/image-20230506234025475.webp 825w\"\n              sizes=\"(max-width: 825px) 100vw, 825px\"\n              type=\"image/webp\"\n            />\n          <source\n            srcset=\"/static/782d82840ff959b670976f6c36059172/8ff5a/image-20230506234025475.png 240w,\n/static/782d82840ff959b670976f6c36059172/e85cb/image-20230506234025475.png 480w,\n/static/782d82840ff959b670976f6c36059172/d4c13/image-20230506234025475.png 825w\"\n            sizes=\"(max-width: 825px) 100vw, 825px\"\n            type=\"image/png\"\n          />\n          <img\n            class=\"gatsby-resp-image-image\"\n            src=\"/static/782d82840ff959b670976f6c36059172/d4c13/image-20230506234025475.png\"\n            alt=\"image-20230506234025475\"\n            title=\"image-20230506234025475\"\n            loading=\"lazy\"\n            style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n          />\n        </picture>\n  </a>\n    </span></p>\n<p>システム側のグローバルフラグは、カーネルデバッグ時に<code class=\"language-text\">!gflag</code>拡張機能を使用することで参照できます。</p>\n<p>ただし、現在はこの拡張は NtGlobalFlag の設定値にしか対応していないようです。</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 692px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/b544950cd0af10cfbf57dd8c9c2f6669/91e7e/image-20230506235525826.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 129.16666666666669%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAaCAYAAAC3g3x9AAAACXBIWXMAAAsTAAALEwEAmpwYAAACVUlEQVRIx42Va47aQBCEfQ/e2AYDNm+Mza4iJdlNpARFwC05SaJcqjNfs40Myhh+lAYbpqaqu3oIPn99l/F4JKv12q1jieNYMRgMFFmWyXA4lFarJe12+4r7Z0MAIRuWy6VMJhOJokif+/2+dDodXbvdrjSbzRv4SIMf+18ym81ktVrJYrGQNE0lz3OZTqcyGo30kHug3Kvw7f27bsbafD6XtbPOauSQ8h3v+R2H895UeiwPZOJ+xEY2sQEkSaJ1RRWH8D3vKYNX4U9nOXUbNpuNqoKwKAotAXVlhQxlANIwDP2Eu9dPzlZyYxVylLGRJgFrgsHblLzYSa/XU1tm16zxA+vq07Epdq8ydF3DDuoM1s3q5ipJPeFHDqkdq9WO+NDl/230IdiWLxK6rmEXZdgFFnSUV3PnU3ZTQ2Jg4aZ2fOYAlNOQ+zrWkQaFUzh2thZOUVmW2untdqvgIGDz7avnrWWnMI4jSZ1Nm47s47MpJVLUl6D7JsRbQ5pABm1qICGP2K+b4Sth6boMAWTYpLOshJuacgB1rE5HfQ13LzrLEGLNVlNsdlHMwQ8JsYyCNM2utw5AGYAUq41G47mmlBrsy6SYTVNm959dsNV5ro0No0eQ7WKFFHLeoZ7IcHs/ncMoCtUyKiFhRZldroBuQ/ywyxAmLhJsMmWEm7rZnxaRAVWVNV2+xAZlEJl1A892g0P48HLIi1JVoNAmg6bYLc1hENEUOm2rD8GXt2+O5PIHZdf9/dXPczVKdQh+//kr5/NZ9vu9HI9HxeFwUFSfWU+n00P8AzBB/2RTL+TAAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <picture>\n          <source\n              srcset=\"/static/b544950cd0af10cfbf57dd8c9c2f6669/8ac56/image-20230506235525826.webp 240w,\n/static/b544950cd0af10cfbf57dd8c9c2f6669/d3be9/image-20230506235525826.webp 480w,\n/static/b544950cd0af10cfbf57dd8c9c2f6669/f686e/image-20230506235525826.webp 692w\"\n              sizes=\"(max-width: 692px) 100vw, 692px\"\n              type=\"image/webp\"\n            />\n          <source\n            srcset=\"/static/b544950cd0af10cfbf57dd8c9c2f6669/8ff5a/image-20230506235525826.png 240w,\n/static/b544950cd0af10cfbf57dd8c9c2f6669/e85cb/image-20230506235525826.png 480w,\n/static/b544950cd0af10cfbf57dd8c9c2f6669/91e7e/image-20230506235525826.png 692w\"\n            sizes=\"(max-width: 692px) 100vw, 692px\"\n            type=\"image/png\"\n          />\n          <img\n            class=\"gatsby-resp-image-image\"\n            src=\"/static/b544950cd0af10cfbf57dd8c9c2f6669/91e7e/image-20230506235525826.png\"\n            alt=\"image-20230506235525826\"\n            title=\"image-20230506235525826\"\n            loading=\"lazy\"\n            style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n          />\n        </picture>\n  </a>\n    </span></p>\n<p><code class=\"language-text\">!gflag -?</code>コマンドを実行すると、グローバルフラグのヘルプを出力することができます。</p>\n<h3 id=\"イメージファイルごとのグローバルフラグ\" style=\"position:relative;\"><a href=\"#%E3%82%A4%E3%83%A1%E3%83%BC%E3%82%B8%E3%83%95%E3%82%A1%E3%82%A4%E3%83%AB%E3%81%94%E3%81%A8%E3%81%AE%E3%82%B0%E3%83%AD%E3%83%BC%E3%83%90%E3%83%AB%E3%83%95%E3%83%A9%E3%82%B0\" aria-label=\"イメージファイルごとのグローバルフラグ permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>イメージファイルごとのグローバルフラグ</h3>\n<p>また、各イメージ(プログラム)にもグローバルフラグの設定が用意されています。</p>\n<p>各イメージファイルごとのグローバルフラグは<code class=\"language-text\">HKEY_LOCAL_MACHINE\\SOFTWARE\\Microsoft\\Windows NT\\CurrentVersion\\Image File Execution Options\\&lt;Application></code>に定義されています。</p>\n<p>このレジストリ配下にはアプリケーション起動時にプログラムを開くアプリケーションを指定する<code class=\"language-text\">Debugger</code>オプションや、アプリケーション終了時のプロセス起動に悪用できる<code class=\"language-text\">SirentProcessExit</code>が含まれます。</p>\n<p>これらの Image File Execution Options(IEFO) オプションは、デバッグ用途だけでなく Malware が Persistence の目的で悪用する場合があることも知られています。</p>\n<p>各イメージのグローバルフラグは、ローダや Windows エラー報告(WER) などのユーザモードコンポーネントによって処理されます。</p>\n<p>例えばローダがグローバルフラグを処理する場合には、プログラムが起動するためにプロセスを初期化して依存モジュールをロードする際にグローバルフラグが処理されます。</p>\n<p>この時にローダが実行する<code class=\"language-text\">LdrpInitializeExecutionOptions</code>関数は、イメージファイルの名前に基づいて IEFO のレジストリキーを参照し、グローバルフラグを取得します。</p>\n<p>ローダがレジストリから取得したグローバルフラグの情報は PEB 内の NtGlobalFlag と NtGlobalFlag2 に格納されます。</p>\n<p>実際に GFlags でグローバルフラグを設定したメモ帳アプリの PEB を参照してみると、以下のように<code class=\"language-text\">NtGlobalFlag</code>に値が設定されていることを確認できました。</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token operator\">></span> <span class=\"token operator\">!</span>ped\nNo <span class=\"token builtin class-name\">export</span> ped found\n<span class=\"token number\">0</span>:00<span class=\"token operator\"><span class=\"token file-descriptor important\">0</span>></span> <span class=\"token operator\">!</span>peb\nPEB at 00000030dbc1e000\n    InheritedAddressSpace:    No\n    ReadImageFileExecOptions: No\n    BeingDebugged:            Yes\n    ImageBaseAddress:         00007ff689330000\n    NtGlobalFlag:             <span class=\"token number\">70</span>\n    NtGlobalFlag2:            <span class=\"token number\">0</span>\n    Ldr                       00007ffcf7f9c4c0\n    Ldr.Initialized:          Yes\n    Ldr.InInitializationOrderModuleList: 000001744bbe2a10 <span class=\"token builtin class-name\">.</span> 000001744bbe3130\n    Ldr.InLoadOrderModuleList:           000001744bbe2bc0 <span class=\"token builtin class-name\">.</span> 000001744bbf04e0\n    Ldr.InMemoryOrderModuleList:         000001744bbe2bd0 <span class=\"token builtin class-name\">.</span> 000001744bbf04f0</code></pre></div>\n<p>参考：<a href=\"https://www.amazon.co.jp/%E3%82%A4%E3%83%B3%E3%82%B5%E3%82%A4%E3%83%89Windows-%E7%AC%AC7%E7%89%88-%E4%B8%8B-%E3%83%9E%E3%82%A4%E3%82%AF%E3%83%AD%E3%82%BD%E3%83%95%E3%83%88%E5%85%AC%E5%BC%8F%E8%A7%A3%E8%AA%AC%E6%9B%B8-Andrea-Allievi%EF%BC%88%E3%82%A2%E3%83%B3%E3%83%89%E3%83%AC%E3%82%A2%E3%83%BB%E3%82%A2%E3%83%AA%E3%82%A8%E3%83%93%EF%BC%89/dp/4296080202\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">インサイドWindows 第7版 下</a></p>\n<h2 id=\"カーネルモードスタックをページアウトされないようにする\" style=\"position:relative;\"><a href=\"#%E3%82%AB%E3%83%BC%E3%83%8D%E3%83%AB%E3%83%A2%E3%83%BC%E3%83%89%E3%82%B9%E3%82%BF%E3%83%83%E3%82%AF%E3%82%92%E3%83%9A%E3%83%BC%E3%82%B8%E3%82%A2%E3%82%A6%E3%83%88%E3%81%95%E3%82%8C%E3%81%AA%E3%81%84%E3%82%88%E3%81%86%E3%81%AB%E3%81%99%E3%82%8B\" aria-label=\"カーネルモードスタックをページアウトされないようにする permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>カーネルモードスタックをページアウトされないようにする</h2>\n<p>GFlags から<code class=\"language-text\">Disable paging of kernel stacks</code>のグローバルフラグを設定することで、カーネルモードスタックのページアウトを無効化することができます。</p>\n<p><code class=\"language-text\">Disable paging of kernel stacks</code>は、<code class=\"language-text\">FLG_DISABLE_PAGE_KERNEL_STACKS(0x80000)</code>で設定されます。</p>\n<p>以下の Docs に記載の通り、カーネルモードスタックは通常ページングされず、メモリ内に常駐することが保証されています。</p>\n<p>しかし、非アクティブなスレッドのカーネルスタックについてまれにページアウトが発生する場合があります。</p>\n<p>カーネルスタックがページアウトされると、カーネルデバッグやフルダンプの解析時に対象のスレッドに関する情報を参照することができなくなります。</p>\n<p>そのため、例えばデッドロック事象のデバッグや、すべてのスレッドを追跡する必要がある場合にこのグローバルフラグを設定することが有効です。</p>\n<p>参考：<a href=\"https://learn.microsoft.com/en-us/windows-hardware/drivers/debugger/disable-paging-of-kernel-stacks\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">Disable paging of kernel stacks - Windows drivers | Microsoft Learn</a></p>\n<p><code class=\"language-text\">Disable paging of kernel stacks</code>は以下の箇所から設定できます。</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 532px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/95d0fc59be1b8d4958572b0f10afaa06/89a37/image-20230512201841302.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 43.75%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAJCAIAAAC9o5sfAAAACXBIWXMAAAsTAAALEwEAmpwYAAABjUlEQVQoz11RXXObMBDkN8dp3TznLb8nz43rac2XAQcomAQkgR1LFhIY7BLy1sWd6XS6c7q5k3Q7e3eGOPDD4U1pPX58DMPwfsX4/j/w9OsfIG3b1hBCHGFSIjmdTlo3upnQNq2e0OC+aXTXdcMVf4vhjd2uKooiSdLtdptlGSWUMUYJKVkJY5RV+FFVdV2jHuzw/TUAsYFDKY3iOIqi5+dQKX25XPrzhB4/aonSHXgIfbsGJSGkKBo1AcUK3HEcp0kaRTGI+r6fWsDpOrbffTOt5cr84TiO769c97tlbX4mr4yhOwMEnHNCKEirsgIvFE7ChkE9PpLZTXL7KZ3dvHye5/N5OpvlX+70w4O6v6/Xa0PVNSly23aCYBOGoed5GAFGhOZaxrhjp1+fsqdFvlxmi0Vprvau2yZJG8dqvze0UpiPaVq+79u27Xl+EAR5UZwh/nzmWllBYAUbNwxXa6/koh/Hdhi6cVSQjTVgO8fjsZYSXkqJRk5/gI0pJYWQguNN8APiDuNoGnhI/g0HBttQ/URI8QAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <picture>\n          <source\n              srcset=\"/static/95d0fc59be1b8d4958572b0f10afaa06/8ac56/image-20230512201841302.webp 240w,\n/static/95d0fc59be1b8d4958572b0f10afaa06/d3be9/image-20230512201841302.webp 480w,\n/static/95d0fc59be1b8d4958572b0f10afaa06/b5f85/image-20230512201841302.webp 532w\"\n              sizes=\"(max-width: 532px) 100vw, 532px\"\n              type=\"image/webp\"\n            />\n          <source\n            srcset=\"/static/95d0fc59be1b8d4958572b0f10afaa06/8ff5a/image-20230512201841302.png 240w,\n/static/95d0fc59be1b8d4958572b0f10afaa06/e85cb/image-20230512201841302.png 480w,\n/static/95d0fc59be1b8d4958572b0f10afaa06/89a37/image-20230512201841302.png 532w\"\n            sizes=\"(max-width: 532px) 100vw, 532px\"\n            type=\"image/png\"\n          />\n          <img\n            class=\"gatsby-resp-image-image\"\n            src=\"/static/95d0fc59be1b8d4958572b0f10afaa06/89a37/image-20230512201841302.png\"\n            alt=\"image-20230512201841302\"\n            title=\"image-20230512201841302\"\n            loading=\"lazy\"\n            style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n          />\n        </picture>\n  </a>\n    </span></p>\n<p>なお、実際のデバッグの際には上記のカーネルスタックのページアウトの防止だけでなく、プール領域ののメモリ割り当てに関する統計を計算することができる<code class=\"language-text\">FLG_POOL_ENABLE_TAGGING(0x400)</code>のグローバルフラグを設定するのも良いという情報が以下のブログに記載されていました。</p>\n<p>参考：<a href=\"http://winkit.blog.fc2.com/blog-entry-54.html?sp\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">カーネルモードスタックをページアウトされないようにするための方法 | 窓のくすり箱</a></p>\n<p>参考：<a href=\"https://learn.microsoft.com/ja-jp/windows-hardware/drivers/debugger/enable-pool-tagging\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">Enable pool tagging - Windows drivers | Microsoft Learn</a></p>\n<h2 id=\"イメージローダの処理を見る\" style=\"position:relative;\"><a href=\"#%E3%82%A4%E3%83%A1%E3%83%BC%E3%82%B8%E3%83%AD%E3%83%BC%E3%83%80%E3%81%AE%E5%87%A6%E7%90%86%E3%82%92%E8%A6%8B%E3%82%8B\" aria-label=\"イメージローダの処理を見る permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>イメージローダの処理を見る</h2>\n<p>GFlags を使って<code class=\"language-text\">Show Loader Snaps</code>のデバッグ機能を有効化するグローバルフラグをセットすることで、対象のアプリケーションの起動時にイメージローダのデバッグ出力を参照できるようになります。</p>\n<p>これにより、実行ファイルとライブラリのロードとアンロードの情報をデバッガに出力できます。</p>\n<p><code class=\"language-text\">Show Loader Snaps</code>は<code class=\"language-text\">FLG_SHOW_LDR_SNAPS(0x2)</code>で、システム全体に設定された場合はドライバのロードおよびアンロードの情報を出力します。</p>\n<p>特定の ImageFile のみに設定された場合は、アプリケーション起動時の DLL のロードとアンロードに関する情報を出力します。</p>\n<p>参考：<a href=\"https://learn.microsoft.com/en-us/windows-hardware/drivers/debugger/show-loader-snaps\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">Show loader snaps - Windows drivers | Microsoft Learn</a></p>\n<p>例えば、gflags.exe を起動して [Image File] から以下のように設定することで、Notepad.exe に対して<code class=\"language-text\">Show Loader Snaps</code>と<code class=\"language-text\">Debugger</code>フラグを設定します。</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 527px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/50919acce109af02de3ce5fec63d7594/44385/image-20230506194811885.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 110.00000000000001%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAWCAIAAABPIytRAAAACXBIWXMAAAsTAAALEwEAmpwYAAADH0lEQVQ4y11T2U7bQBTNX/c/+lQeWqRKrYDyxAMgEQRtIBsJWZzEjvF4G+/jfQkIkNJjOwnL9Wg0M75zz73nnmm05/OlrEgGDfKcpamfZyzLsGBZufazzM9zDC9JdsOO47QofrfbDUFV4yBgrhv6fhyGAWNpHGMOmO97Hmac+4zlWfZYFJuxWq3X67PxuDERRUl8WCwWS5iwVGCqMuU47BRZUVUNW13XESEABoKGITUMZtlHt7cNQdOW/GIwGNzd3bU7XXhEUahpum1bWZZ5ridJEraEEATKKlM1zdHpQatVXjYpFQSB53ng27adpqVHmqYRwqCQAGAbi+MYh3GSrF+eS+SlrmdJUgHCN0J6G49qDraGIHXmCZzD8Lkojm5uSmRD1yaTKTebAZzjONNCwmAN9IWyLI/H49l8Pp/NOW7K80IZKIpeVqvqsq5rstz61+r3+p1Op9vtje5Huk6BAGTLskRRRAhUDioR98NlpI2WyIqi6TqcwI1BKRJMkjJtx3FwUpsiyzip03677DmOIKA1oiSRhwfJ9dw0Teqaqx6zutodFx+QIYD6tLZkazgE+UiYSBL6FG3/viHXrQJPYAu06ZQCxHXdmnaQXHWralgUbnTyHhkClEoNqEAgBGVr4lIksgJkkIS40+mUKz80ZIYUEObtcpokYRjteos5rwwLx7YNwzBNExHV6itb/r5V6DO0iX72+330CbCUGvBGhpiHw/vJZAIiUb9MZAgbdb/uaqaaNhqNkBKUAIUiynA47PV68KOUInMI2zQtxPIqsx3nKU1LeS6qn3CFjJAgoNDzGVeqDSzLhOCVqYoKzqH/SjBkwfOh5x3jPaNmcIrApgH9WKgQPONppFW38DyS7WJnYOX18bFMG/XhfcMbDGXVvLvwyXYSAGGo+Q/SnhKCMkpQvOB6OI5dDSwc17WrgYXHWLnFGWNFkvy6vm6Ytr1+enrJ89ei+DQKyMOyYtdNfR9rZhhZEDxnOSXk0Wdng0Fj7+rquN8/6HYPP46jXu/H5eW309O98/PvzYv9yybWP5rNn3+vv56c7F9cfDk8/A+glZBfZ+T5MgAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <picture>\n          <source\n              srcset=\"/static/50919acce109af02de3ce5fec63d7594/8ac56/image-20230506194811885.webp 240w,\n/static/50919acce109af02de3ce5fec63d7594/d3be9/image-20230506194811885.webp 480w,\n/static/50919acce109af02de3ce5fec63d7594/042cc/image-20230506194811885.webp 527w\"\n              sizes=\"(max-width: 527px) 100vw, 527px\"\n              type=\"image/webp\"\n            />\n          <source\n            srcset=\"/static/50919acce109af02de3ce5fec63d7594/8ff5a/image-20230506194811885.png 240w,\n/static/50919acce109af02de3ce5fec63d7594/e85cb/image-20230506194811885.png 480w,\n/static/50919acce109af02de3ce5fec63d7594/44385/image-20230506194811885.png 527w\"\n            sizes=\"(max-width: 527px) 100vw, 527px\"\n            type=\"image/png\"\n          />\n          <img\n            class=\"gatsby-resp-image-image\"\n            src=\"/static/50919acce109af02de3ce5fec63d7594/44385/image-20230506194811885.png\"\n            alt=\"image-20230506194811885\"\n            title=\"image-20230506194811885\"\n            loading=\"lazy\"\n            style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n          />\n        </picture>\n  </a>\n    </span></p>\n<p>この設定を適用することで、<code class=\"language-text\">HKEY_LOCAL_MACHINE\\Software\\Microsoft\\Windows NT\\CurrentVersion\\Image File Execution Options\\Notepad.exe</code>配下の<code class=\"language-text\">Debugger</code>に WinDbg のパスが設定されます。</p>\n<p>また、<code class=\"language-text\">GlobalFlag</code>に値 2 がセットされます。(この環境では他に Notepad.exe に GlobalFlag は設定していないため、<code class=\"language-text\">Show Loader Snaps</code>の Hexadecimal value である 0x2 がそのまま適用されます。)</p>\n<p>これで Notepad.exe には<code class=\"language-text\">Debugger</code>フラグが設定されたため、メモ帳を起動しようとすると自動的に WinDbg がアタッチされ、以下のような出力が記録されます。</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">ModLoad: 00007ff7<span class=\"token variable\"><span class=\"token variable\">`</span>8c3b0000 00007ff7<span class=\"token variable\">`</span></span>8c3e8000   notepad.exe\nModLoad: 00007ffd<span class=\"token variable\"><span class=\"token variable\">`</span>1f2d0000 00007ffd<span class=\"token variable\">`</span></span>1f4c8000   ntdll.dll\n22e0:0710 @ 00503718 - LdrpInitializeProcess - INFO: Beginning execution of notepad.exe <span class=\"token punctuation\">(</span>C:<span class=\"token punctuation\">\\</span>WINDOWS<span class=\"token punctuation\">\\</span>system32<span class=\"token punctuation\">\\</span>notepad.exe<span class=\"token punctuation\">)</span>\n\tCurrent directory: C:<span class=\"token punctuation\">\\</span>Users<span class=\"token punctuation\">\\</span>Tadpole01<span class=\"token punctuation\">\\</span>\n\tPackage directories: <span class=\"token punctuation\">(</span>null<span class=\"token punctuation\">)</span>\n22e0:0710 @ 00503718 - LdrLoadDll - ENTER: DLL name: KERNEL32.DLL\n22e0:0710 @ 00503718 - LdrpLoadDllInternal - ENTER: DLL name: KERNEL32.DLL\n22e0:0710 @ 00503718 - LdrpFindKnownDll - ENTER: DLL name: KERNEL32.DLL\n22e0:0710 @ 00503718 - LdrpFindKnownDll - RETURN: Status: 0x00000000\n22e0:0710 @ 00503718 - LdrpMinimalMapModule - ENTER: DLL name: C:<span class=\"token punctuation\">\\</span>WINDOWS<span class=\"token punctuation\">\\</span>System32<span class=\"token punctuation\">\\</span>KERNEL32.DLL\nModLoad: 00007ffd<span class=\"token variable\"><span class=\"token variable\">`</span>1d390000 00007ffd<span class=\"token variable\">`</span></span>1d44f000   C:<span class=\"token punctuation\">\\</span>WINDOWS<span class=\"token punctuation\">\\</span>System32<span class=\"token punctuation\">\\</span>KERNEL32.DLL\n22e0:0710 @ 00503718 - LdrpMinimalMapModule - RETURN: Status: 0x00000000\n22e0:0710 @ 00503718 - LdrpPreprocessDllName - INFO: DLL api-ms-win-core-rtlsupport-l1-1-0.dll was redirected to C:<span class=\"token punctuation\">\\</span>WINDOWS<span class=\"token punctuation\">\\</span>SYSTEM32<span class=\"token punctuation\">\\</span>ntdll.dll by API <span class=\"token builtin class-name\">set</span>\n22e0:0710 @ 00503718 - LdrpFindKnownDll - ENTER: DLL name: KERNELBASE.dll\n22e0:0710 @ 00503718 - LdrpFindKnownDll - RETURN: Status: 0x00000000\n22e0:0710 @ 00503718 - LdrpMinimalMapModule - ENTER: DLL name: C:<span class=\"token punctuation\">\\</span>WINDOWS<span class=\"token punctuation\">\\</span>System32<span class=\"token punctuation\">\\</span>KERNELBASE.dll\nModLoad: 00007ffd<span class=\"token variable\"><span class=\"token variable\">`</span>1ca10000 00007ffd<span class=\"token variable\">`</span></span>1cd06000   C:<span class=\"token punctuation\">\\</span>WINDOWS<span class=\"token punctuation\">\\</span>System32<span class=\"token punctuation\">\\</span>KERNELBASE.dll\n22e0:0710 @ 00503718 - LdrpMinimalMapModule - RETURN: Status: 0x00000000\n22e0:0710 @ 00503718 - LdrpPreprocessDllName - INFO: DLL api-ms-win-eventing-provider-l1-1-0.dll was redirected to C:<span class=\"token punctuation\">\\</span>WINDOWS<span class=\"token punctuation\">\\</span>SYSTEM32<span class=\"token punctuation\">\\</span>kernelbase.dll by API <span class=\"token builtin class-name\">set</span>\n22e0:0710 @ 00503718 - LdrpPreprocessDllName - INFO: DLL api-ms-win-core-apiquery-l1-1-0.dll was redirected to C:<span class=\"token punctuation\">\\</span>WINDOWS<span class=\"token punctuation\">\\</span>SYSTEM32<span class=\"token punctuation\">\\</span>ntdll.dll by API <span class=\"token builtin class-name\">set</span>\n22e0:0710 @ 00503718 - LdrpPreprocessDllName - INFO: DLL api-ms-win-core-apiquery-l1-1-1.dll was redirected to C:<span class=\"token punctuation\">\\</span>WINDOWS<span class=\"token punctuation\">\\</span>SYSTEM32<span class=\"token punctuation\">\\</span>ntdll.dll by API <span class=\"token builtin class-name\">set</span></code></pre></div>\n<p>出力はかなり多い(手元の環境で 120 KB くらい)ので、必要に応じてログファイルに出力しておくとよいと思います。</p>\n<p>例えば、<code class=\"language-text\">Debugger</code>フラグに以下のようにログ出力先のファイルパスを含めて実行すると、起動時のログをファイルに出力することができます。</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">C:<span class=\"token punctuation\">\\</span>Program Files <span class=\"token punctuation\">(</span>x86<span class=\"token punctuation\">)</span><span class=\"token punctuation\">\\</span>Windows Kits<span class=\"token punctuation\">\\</span><span class=\"token number\">10</span><span class=\"token punctuation\">\\</span>Debuggers<span class=\"token punctuation\">\\</span>x64<span class=\"token punctuation\">\\</span>windbg.exe -logo  C:<span class=\"token punctuation\">\\</span>Users<span class=\"token punctuation\">\\</span>Public<span class=\"token punctuation\">\\</span>debug.log</code></pre></div>\n<p><code class=\"language-text\">Show Loader Snaps</code>のフラグを有効化している場合は、アプリケーションの起動時だけでなく何らかの操作でモジュールが後からロードされる場合にも、WinDbg 上にイベントを出力します。</p>\n<h2 id=\"プログラムの起動時にデバッガを起動する\" style=\"position:relative;\"><a href=\"#%E3%83%97%E3%83%AD%E3%82%B0%E3%83%A9%E3%83%A0%E3%81%AE%E8%B5%B7%E5%8B%95%E6%99%82%E3%81%AB%E3%83%87%E3%83%90%E3%83%83%E3%82%AC%E3%82%92%E8%B5%B7%E5%8B%95%E3%81%99%E3%82%8B\" aria-label=\"プログラムの起動時にデバッガを起動する permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>プログラムの起動時にデバッガを起動する</h2>\n<p>前述しましたが、各イメージごとの<code class=\"language-text\">Debugger</code>オプションを設定することでプログラムの起動時にデバッガをアタッチすることができるようになります。</p>\n<p>このような Image File Execution Options(IFEO) の設定はグローバルフラグとは異なる設定ですが、GFlags から設定することが可能です。</p>\n<p>例えば、以下のように設定を行うことでメモ帳を起動する際に WinDbg を使用してプログラムを起動し、速やかにデバッグを開始することができます。</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 535px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/ee8bf6e84a0dd18ac6b9c7f726c8c9eb/b5245/image-20230512203828930.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 107.08333333333333%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAVCAIAAADJt1n/AAAACXBIWXMAAAsTAAALEwEAmpwYAAACfUlEQVQ4y12UaVvqMBCF+f+/C6XIUgWkZWvpkjQFgS7oc/XTfSepoB4ozTLLmTMJvTRNVa7KsvwSfH65l8PXHZ/f+Gfx8fFR13Uvy7Jc5UmaMtBK82uMUUqliaxkaaa0TrP0dDo3TVNbtNfr9f3KVJw36/VqtdpsNqtwpRQRdBAE6/WGcWGhtX57eztZVFVF6M1mC+UehHEbjyej0ejhcaB1QWySs17XzfF4ZHe3i3YgivBs25Yt4uZ53sOOqDJRijnWN3qXy6Wu6raRTyOPvGSxriEOox6Pc2ZAoDxXcKtJcRGUh4PUzSqBsxx97PKFfXE2poC97/vPzy/z+YLfCHp2GyPMZ7OX19clXwcSOF7O2eyTxBt4k8nkaTgcPo0IRHlwl8xWEerdbqVopi7t3Zk6pWGWGARNaSoL7CihLI3TD+ZSkdPi5syGjb3d7/dxHFO7swAHak5TCapUhXo24q/M3+pIHvRESRG3bVk/n8/KAlOmdr25O/MkSUKTp9PnoectlwEVoBks8CS0ts5yDumlUnEs60TpMhPmcDy6M0RvSlNipLVyaVE4DMKFyB3wxedes21vafVS1kdO4ruFayYqQA1ROOvRLnKtvvXZ0GfP88bj8WP/wfOGU98nzWw2I5Apijmj+TymitMJ/VDXKSLOWKC070+hl+xpecKtGAy8fr8fhmEcc6q3URRHFkwhIizSrKNNAxcLKSpJUk4C4QpdSAG6oH7bZnpvmFNbYeSekb+jDQ3XrbMFg9bC3ZDGont9o6Pt1HZHyh3aW9urH7j8Rqc2apUdtb/QFu6Q/LRx/xDdfb5l/gOaiDZcDBJgHQYBciJ4sHydzRes/AdDZXDFT1m7AQAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <picture>\n          <source\n              srcset=\"/static/ee8bf6e84a0dd18ac6b9c7f726c8c9eb/8ac56/image-20230512203828930.webp 240w,\n/static/ee8bf6e84a0dd18ac6b9c7f726c8c9eb/d3be9/image-20230512203828930.webp 480w,\n/static/ee8bf6e84a0dd18ac6b9c7f726c8c9eb/e0c9f/image-20230512203828930.webp 535w\"\n              sizes=\"(max-width: 535px) 100vw, 535px\"\n              type=\"image/webp\"\n            />\n          <source\n            srcset=\"/static/ee8bf6e84a0dd18ac6b9c7f726c8c9eb/8ff5a/image-20230512203828930.png 240w,\n/static/ee8bf6e84a0dd18ac6b9c7f726c8c9eb/e85cb/image-20230512203828930.png 480w,\n/static/ee8bf6e84a0dd18ac6b9c7f726c8c9eb/b5245/image-20230512203828930.png 535w\"\n            sizes=\"(max-width: 535px) 100vw, 535px\"\n            type=\"image/png\"\n          />\n          <img\n            class=\"gatsby-resp-image-image\"\n            src=\"/static/ee8bf6e84a0dd18ac6b9c7f726c8c9eb/b5245/image-20230512203828930.png\"\n            alt=\"image-20230512203828930\"\n            title=\"image-20230512203828930\"\n            loading=\"lazy\"\n            style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n          />\n        </picture>\n  </a>\n    </span></p>\n<p>この設定は、例えば直接実行することが許可されず、何らかのインターフェースやジョブを通して起動する必要があり、かつシステムに常駐しないためにデバッガをアタッチすることが困難なシナリオでデバッグを行う必要がある際などに非常に役に立ちます。</p>\n<p>参考：<a href=\"https://learn.microsoft.com/en-us/previous-versions/windows/desktop/xperf/image-file-execution-options\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">Image File Execution Options | Microsoft Learn</a></p>\n<p>なお、この時<code class=\"language-text\">Debugger</code>のパスに指定できるパスは実際のデバッガのパスに限定されません。</p>\n<p>例えば以下のようにエディタやその他の任意のプログラムを指定すると、メモ帳アプリの起動時に自動的に指定したプログラムでメモ帳を開くようになります。</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 960px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/809f7cfa3bc5fde355a5de8b3c3602a2/1d553/image-20230520162808075.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 45.833333333333336%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAJCAIAAAC9o5sfAAAACXBIWXMAAAsTAAALEwEAmpwYAAABvUlEQVQozyVRzXOiMBTn/z+3PbVana66wthZ3dPaGWcEuiruRUGQQEJCEghQ+fDkra/dmeRNJi+/9/uIFsSMUJ5KlTBJuZSq+miuH3VXXloPxRgTykTCM8IEk4W6dKqq86rlRVPWnUYZR+FZCF6WBaw8zwql2qZRuTp6Lg4OjCQYJzGKQgSFwPaD2PXj8Iy0VOYJIZTStm0vlwtjLEkSpVTTNEcfmfZf3ZiZpmVatuf5lMIoJoQUXCIUa4Rx13UPhwNcARhjHMVxURR1XfsI/5rPB8Pno3vc7raWZdrv9ma7Mc31ZrN1HEfjmQI2IQS8BnCe51VVdV0HZ+8cWbY1GA5t2zZms/Fk8vLyY774PXt91Q291+99gVPG0pSrQpVlCYMIIZxzALtBBLDJz8loNFqb5v7fHthCFEZRlLI0xrFGUxn4vh/4IBiUh+EZevLbAjD/WS7v7u90w3h8erx/eBgMB6A/ihAIvN1uGqYpYCEkwECVUoLh6/UKLoB5tVr1n/tTXR9PxvPFIgiCXClIN8uyuqk1kanm2+1/z5AzNEAC/JkboOXbW6/3NJ1O1+Z65ziQ+na3O51Ozt4BUZ/KqsV6tEOpXAAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <picture>\n          <source\n              srcset=\"/static/809f7cfa3bc5fde355a5de8b3c3602a2/8ac56/image-20230520162808075.webp 240w,\n/static/809f7cfa3bc5fde355a5de8b3c3602a2/d3be9/image-20230520162808075.webp 480w,\n/static/809f7cfa3bc5fde355a5de8b3c3602a2/e46b2/image-20230520162808075.webp 960w,\n/static/809f7cfa3bc5fde355a5de8b3c3602a2/69f9d/image-20230520162808075.webp 1159w\"\n              sizes=\"(max-width: 960px) 100vw, 960px\"\n              type=\"image/webp\"\n            />\n          <source\n            srcset=\"/static/809f7cfa3bc5fde355a5de8b3c3602a2/8ff5a/image-20230520162808075.png 240w,\n/static/809f7cfa3bc5fde355a5de8b3c3602a2/e85cb/image-20230520162808075.png 480w,\n/static/809f7cfa3bc5fde355a5de8b3c3602a2/d9199/image-20230520162808075.png 960w,\n/static/809f7cfa3bc5fde355a5de8b3c3602a2/1d553/image-20230520162808075.png 1159w\"\n            sizes=\"(max-width: 960px) 100vw, 960px\"\n            type=\"image/png\"\n          />\n          <img\n            class=\"gatsby-resp-image-image\"\n            src=\"/static/809f7cfa3bc5fde355a5de8b3c3602a2/d9199/image-20230520162808075.png\"\n            alt=\"image-20230520162808075\"\n            title=\"image-20230520162808075\"\n            loading=\"lazy\"\n            style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n          />\n        </picture>\n  </a>\n    </span></p>\n<p>このような仕様は悪用される場合もあるので注意が必要です。</p>\n<h2 id=\"プログラムの終了を監視する\" style=\"position:relative;\"><a href=\"#%E3%83%97%E3%83%AD%E3%82%B0%E3%83%A9%E3%83%A0%E3%81%AE%E7%B5%82%E4%BA%86%E3%82%92%E7%9B%A3%E8%A6%96%E3%81%99%E3%82%8B\" aria-label=\"プログラムの終了を監視する permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>プログラムの終了を監視する</h2>\n<p>こちらも厳密にはグローバルフラグではないですが、各アプリケーションの<code class=\"language-text\">Silent Process Exit</code>を有効化することでアプリケーションの終了を監視をすることができます。</p>\n<p>監視できる終了操作は ExitProcess による自分自身の終了(右上の終了ボタンを押した場合など)か、TerminateProcess による他アプリケーションからの終了操作のみです。</p>\n<p><code class=\"language-text\">Silent Process Exit</code>を設定すると、アプリケーションが終了した際にクラッシュダンプを出力したり、ホストに通知を送信したりできます。</p>\n<p>また、Monitor process として任意のアプリケーションを起動することもできます。(こちらも悪用される場合があるので注意が必要です。)</p>\n<p>設定は、GFlags の<code class=\"language-text\">Silent Process Exit</code>から行うことができます。</p>\n<p>この設定によって、クラッシュではない要因によって終了したプログラムのダンプを取得してトラブルシューティングを行ったり、プログラムを終了させた要因を特定できるようになります。</p>\n<p>例えば以下のようなオプションでメモ帳アプリの<code class=\"language-text\">Silent Process Exit</code>を設定したとします。</p>\n<p>※ ダンプの種類を [Custom Dump] に設定した場合、取得できるダンプ種類は<a href=\"https://learn.microsoft.com/en-us/windows/win32/api/minidumpapiset/ne-minidumpapiset-minidump_type\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">MINIDUMP_TYPE (minidumpapiset.h)</a>の値によって決定されます。今回は、<code class=\"language-text\">MiniDumpWithFullMemory</code>の値である 0x2 を設定しています。</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 535px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/b9d33122cce4ce71ab960b0456fc5be9/b5245/image-20230520165705480.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 99.58333333333333%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAIAAAAC64paAAAACXBIWXMAAAsTAAALEwEAmpwYAAACgElEQVQ4y32U63KbMBCFef/HaqfttJmYAMGAuUncBOZi4zp2ks6k/SRIx+2P7Mh4kXT2nN2VsIJYlmXVqO755ZVxNWPxX15/LeP6/HK5Pv83gFhRIgopRS66rquqSjVN17Z1XfMqpSyLoizLw+FwvT5dLuvALpdLP4xWnJdZltr2g+d5vr91HCcMQgBKqaquqrKq6rohYtftb4xwsigtWXdt0yRJmuV5mmZJnDSNytJUSDnPMwzn8/mnsdM8n4wxfzwecyGtvFR9v0cdFIRnFuXw27YdBoHredFut4t2YRhC2A9927bjOIJfwfuuy/NcCJ02gXl6rrvZbOyN7boer2Thucx5j48+24hy+gvu97o2RVGQG9LYLYTMsjzLMiZbpQBnxuBgD+SrbFG1dVWic7vdog3xrMVxjI9aNiFymiYcioTaydg7uFTEDsOIwOw7Hmf6BDJOUupHI9ApTFbDMJyNUbxb5spxdEJRFBEbMH0iPLv7vh+M3TpLXdecmSErkgGDNnb8/tA08+GgwVnRnOajbqMxQgJ+e3v7AIxyKrCCTS1WW8AfM8NxWJjzopmmcRjGxUiJNlIUyqKH9s5P/9qkWSYNllVbSPFg0yyXYxDHSRRG2vM4Fa7v+8zra3djps/vsiFOkoR9tJoGcbcacxmU0iWkkQZCT7RRWtZuqt3vOTxBENAkNOuLqdRyQ/N8Obj85HKxeJLaCoZ5HAcWwyiCvzPLmrBt9U3o1wbzZ8o5v9d1znJhpaIc+q6ujaCyaPRnAFi3DHxmWEQ2Hwl8grYmF/isjZ+KSsGPfk4bT/xU1gwascuK7/fOp693965vPwafv915QWx72y8/NnfO9g9Fwj6OVqzj9gAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <picture>\n          <source\n              srcset=\"/static/b9d33122cce4ce71ab960b0456fc5be9/8ac56/image-20230520165705480.webp 240w,\n/static/b9d33122cce4ce71ab960b0456fc5be9/d3be9/image-20230520165705480.webp 480w,\n/static/b9d33122cce4ce71ab960b0456fc5be9/e0c9f/image-20230520165705480.webp 535w\"\n              sizes=\"(max-width: 535px) 100vw, 535px\"\n              type=\"image/webp\"\n            />\n          <source\n            srcset=\"/static/b9d33122cce4ce71ab960b0456fc5be9/8ff5a/image-20230520165705480.png 240w,\n/static/b9d33122cce4ce71ab960b0456fc5be9/e85cb/image-20230520165705480.png 480w,\n/static/b9d33122cce4ce71ab960b0456fc5be9/b5245/image-20230520165705480.png 535w\"\n            sizes=\"(max-width: 535px) 100vw, 535px\"\n            type=\"image/png\"\n          />\n          <img\n            class=\"gatsby-resp-image-image\"\n            src=\"/static/b9d33122cce4ce71ab960b0456fc5be9/b5245/image-20230520165705480.png\"\n            alt=\"image-20230520165705480\"\n            title=\"image-20230520165705480\"\n            loading=\"lazy\"\n            style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n          />\n        </picture>\n  </a>\n    </span></p>\n<p>この状況でタスクマネージャからメモ帳を強制終了した場合、以下のように終了したタスクマネージャのプロセスのダンプも取得されます。</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 715px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/d708c23db7844ca9d2ce1a02eacb94a1/d0c0e/image-20230520164926209.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 19.166666666666664%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAECAIAAAABPYjBAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAn0lEQVQI1z2Paw6DIBCEOYdpCsr7oSAmgKl6/2N1irHfDzI7OwsLmYOTUmmtY4xCCKWUtbafBgL+3EE3pYTAMAyvB+K9Z4zBlVKOHc450tu2eedRpjWhhYw2RkrBKKOUvjtk/1y1lNbacZw5Z84nDJdSj/PcW8Oltda8ruM0QS/LAs0eSAghxYRHQpjDbwsK1xjjgHW3xvJ3Gh9B+R/+Ato8JWoBHapkAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <picture>\n          <source\n              srcset=\"/static/d708c23db7844ca9d2ce1a02eacb94a1/8ac56/image-20230520164926209.webp 240w,\n/static/d708c23db7844ca9d2ce1a02eacb94a1/d3be9/image-20230520164926209.webp 480w,\n/static/d708c23db7844ca9d2ce1a02eacb94a1/cb533/image-20230520164926209.webp 715w\"\n              sizes=\"(max-width: 715px) 100vw, 715px\"\n              type=\"image/webp\"\n            />\n          <source\n            srcset=\"/static/d708c23db7844ca9d2ce1a02eacb94a1/8ff5a/image-20230520164926209.png 240w,\n/static/d708c23db7844ca9d2ce1a02eacb94a1/e85cb/image-20230520164926209.png 480w,\n/static/d708c23db7844ca9d2ce1a02eacb94a1/d0c0e/image-20230520164926209.png 715w\"\n            sizes=\"(max-width: 715px) 100vw, 715px\"\n            type=\"image/png\"\n          />\n          <img\n            class=\"gatsby-resp-image-image\"\n            src=\"/static/d708c23db7844ca9d2ce1a02eacb94a1/d0c0e/image-20230520164926209.png\"\n            alt=\"image-20230520164926209\"\n            title=\"image-20230520164926209\"\n            loading=\"lazy\"\n            style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n          />\n        </picture>\n  </a>\n    </span></p>\n<p>また、<code class=\"language-text\">Stop-Process -Name notepad</code>によって Power Shell から終了した場合は、このように Power Shell のダンプが取得できます。</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 678px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/1122ec328514bb95fca8bc74f9d6f6a8/38cea/image-20230520165942146.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 19.583333333333332%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAECAIAAAABPYjBAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAqUlEQVQI1yVORw6DMBD0Q8A2uBvihgtEivL/X2Ugc1jtatqS7yfu+6613rbtOA4s3nvrHKYxJqWklMIMIeScIai1rusyTdM8z8Q7AwO25QGllHPOGIMZBuRSRq213rs/hVx+g+Ek/pXG9e6ttdrGeSIYDKUMzvM6Rx93ttZjDCkFDMbY3rtzDgVEaRNjKqXEEPFezkUIAQJt4QHeFlKClUJQxqSUECERmh9eXSZoXIs2TwAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <picture>\n          <source\n              srcset=\"/static/1122ec328514bb95fca8bc74f9d6f6a8/8ac56/image-20230520165942146.webp 240w,\n/static/1122ec328514bb95fca8bc74f9d6f6a8/d3be9/image-20230520165942146.webp 480w,\n/static/1122ec328514bb95fca8bc74f9d6f6a8/7e03f/image-20230520165942146.webp 678w\"\n              sizes=\"(max-width: 678px) 100vw, 678px\"\n              type=\"image/webp\"\n            />\n          <source\n            srcset=\"/static/1122ec328514bb95fca8bc74f9d6f6a8/8ff5a/image-20230520165942146.png 240w,\n/static/1122ec328514bb95fca8bc74f9d6f6a8/e85cb/image-20230520165942146.png 480w,\n/static/1122ec328514bb95fca8bc74f9d6f6a8/38cea/image-20230520165942146.png 678w\"\n            sizes=\"(max-width: 678px) 100vw, 678px\"\n            type=\"image/png\"\n          />\n          <img\n            class=\"gatsby-resp-image-image\"\n            src=\"/static/1122ec328514bb95fca8bc74f9d6f6a8/38cea/image-20230520165942146.png\"\n            alt=\"image-20230520165942146\"\n            title=\"image-20230520165942146\"\n            loading=\"lazy\"\n            style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n          />\n        </picture>\n  </a>\n    </span></p>\n<p>参考：<a href=\"https://learn.microsoft.com/en-us/windows-hardware/drivers/debugger/registry-entries-for-silent-process-exit\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">Monitoring Silent Process Exit - Windows drivers | Microsoft Learn</a></p>\n<p>参考：<a href=\"https://jpwinsup.github.io/mslog/other/tips-tricks/findprocesskiller.html\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">プロセスを終了させたプロセスを見つける - Windows の資料採取に関する情報公開サイト</a></p>\n<p>ちなみに、Monitor Process の設定にデバッガのパスを設定しても、残念ながら終了直前のプロセスにデバッガをアタッチすることはできません。</p>\n<p>しかし、例えばプログラムの終了を通知するようなプログラムを起動させたり、プログラム終了直後のシステム情報を収集するようなツールを実行させるといった使い道など、活用方法は数多くありそうです。</p>\n<h2 id=\"まとめ\" style=\"position:relative;\"><a href=\"#%E3%81%BE%E3%81%A8%E3%82%81\" aria-label=\"まとめ permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>まとめ</h2>\n<p>今回は、Windows のトラブルシューティング時に覚えておくと便利な GFlags の設定値についてまとめました。</p>\n<p>個人的に役に立つと感じる設定のみ記載していますが、また今後別の場面で活用した設定などあれば追記していきたいと思います。</p>","fields":{"slug":"/windbg-gflags-tutorial","tagSlugs":["/tag/win-dbg/","/tag/reversing/"]},"frontmatter":{"date":"2023-05-20","description":"Windows のトラブルシューティング時に覚えておくと便利な GFlags の設定値についてまとめました。","tags":["WinDbg","Reversing"],"title":"Windows 環境のトラブルシューティングに役立つ GFlags の設定についてのメモ書き","socialImage":{"publicURL":"/static/e60d0aaf5c216e959ec0071df61c29af/windbg-gflags-tutorial.png"}}}},"pageContext":{"slug":"/windbg-gflags-tutorial"}},"staticQueryHashes":["251939775","401334301","825871152"]}